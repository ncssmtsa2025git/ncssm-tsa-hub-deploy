# # @format

# name: Sync Repos

# on:
#   push:
#     branches:
#       - master
#   # You can add more triggers, such as scheduled events
#   # schedule:
#   #   - cron: '0 0 * * *'

# jobs:
#   sync:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout source repository
#         uses: actions/checkout@v2

#       - name: Push to destination repository
#         run: |
#           git config --global user.email "actions@github.com"
#           git config --global user.name "GitHub Action"
#           git clone https://${{ env.ORG_NAME }}:${{ secrets.PAT }}@github.com/${{ env.ORG_NAME }}/ncssm-tsa-hub-deploy.git
#           cd ncssm-tsa-hub-deploy
#           git remote add ${{ env.ORIGINAL_REPO_NAME }} https://${{ env.ORIGNAL_NAME }}:${{ secrets.PAT }}@github.com/${{ env.ORIGNAL_NAME }}/${{ env.ORIGINAL_REPO_NAME }}.git
#           git remote update
#           git merge ${{ env.ORIGINAL_REPO_NAME }}/master
#           git push origin master
#         env:
#           GITHUB_TOKEN: ${{ secrets.PAT }}
#           ORIGINAL_REPO_NAME: ${{ github.event.repository.name }}
#           ORG_NAME: ncssmtsa2025git
#           ORIGNAL_NAME: CodeWithAaditya

# @format

name: Sync Repos

on:
  push:
    branches:
      - master   # Change this to your default branch in Repo A

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout source repository
        uses: actions/checkout@v4  # v4 is the latest stable

      - name: Push to destination repository
        env:
          PAT: ${{ secrets.PAT }}
        run: |
          git config --global user.email "actions@github.com"
          git config --global user.name "GitHub Action"

          # Add Repo B as a remote
          git remote add mirror https://x-access-token:${PAT}@github.com/ncssmtsa2025git/ncssm-tsa-hub-deploy.git

          # Push main branch from Repo A to Repo B
          git push --force mirror main:main
